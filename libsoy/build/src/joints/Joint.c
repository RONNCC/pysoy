/* Joint.c generated by valac 0.18.1, the Vala compiler
 * generated from Joint.gs, do not modify */

/*
 *  libsoy - soy.joints.Joint
 *  Copyright (C) 2006,2007,2008,2009,2010,2011,2012 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <soy-1/ode.h>
#include <GLES/gl.h>
#include <GLES/glext.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>


#define SOY_JOINTS_TYPE_JOINT (soy_joints_joint_get_type ())
#define SOY_JOINTS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJoint))
#define SOY_JOINTS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))
#define SOY_JOINTS_IS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_IS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_JOINT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))

typedef struct _soyjointsJoint soyjointsJoint;
typedef struct _soyjointsJointClass soyjointsJointClass;
typedef struct _soyjointsJointPrivate soyjointsJointPrivate;

#define SOY_ATOMS_TYPE_POSITION (soy_atoms_position_get_type ())
#define SOY_ATOMS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPosition))
#define SOY_ATOMS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))
#define SOY_ATOMS_IS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_IS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_POSITION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))

typedef struct _soyatomsPosition soyatomsPosition;
typedef struct _soyatomsPositionClass soyatomsPositionClass;

#define SOY_ATOMS_TYPE_AXIS (soy_atoms_axis_get_type ())
#define SOY_ATOMS_AXIS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_AXIS, soyatomsAxis))
#define SOY_ATOMS_AXIS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_AXIS, soyatomsAxisClass))
#define SOY_ATOMS_IS_AXIS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_AXIS))
#define SOY_ATOMS_IS_AXIS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_AXIS))
#define SOY_ATOMS_AXIS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_AXIS, soyatomsAxisClass))

typedef struct _soyatomsAxis soyatomsAxis;
typedef struct _soyatomsAxisClass soyatomsAxisClass;

#define SOY_SCENES_TYPE_SCENE (soy_scenes_scene_get_type ())
#define SOY_SCENES_SCENE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_SCENE, soyscenesScene))
#define SOY_SCENES_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))
#define SOY_SCENES_IS_SCENE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_IS_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_SCENE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))

typedef struct _soyscenesScene soyscenesScene;
typedef struct _soyscenesSceneClass soyscenesSceneClass;

#define SOY_BODIES_TYPE_BODY (soy_bodies_body_get_type ())
#define SOY_BODIES_BODY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_BODY, soybodiesBody))
#define SOY_BODIES_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))
#define SOY_BODIES_IS_BODY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_IS_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_BODY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))

typedef struct _soybodiesBody soybodiesBody;
typedef struct _soybodiesBodyClass soybodiesBodyClass;

#define SOY_MATERIALS_TYPE_MATERIAL (soy_materials_material_get_type ())
#define SOY_MATERIALS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterial))
#define SOY_MATERIALS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))
#define SOY_MATERIALS_IS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_IS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_MATERIAL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))

typedef struct _soymaterialsMaterial soymaterialsMaterial;
typedef struct _soymaterialsMaterialClass soymaterialsMaterialClass;
#define _dJointDestroy0(var) ((var == NULL) ? NULL : (var = (dJointDestroy (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _soybodiesBodyPrivate soybodiesBodyPrivate;
typedef struct _soyscenesScenePrivate soyscenesScenePrivate;

#define SOY_BODIES_TYPE_LIGHT (soy_bodies_light_get_type ())
#define SOY_BODIES_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLight))
#define SOY_BODIES_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))
#define SOY_BODIES_IS_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_IS_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_LIGHT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))

typedef struct _soybodiesLight soybodiesLight;
typedef struct _soybodiesLightClass soybodiesLightClass;

#define SOY_CONTROLLERS_TYPE_CONTROLLER (soy_controllers_controller_get_type ())
#define SOY_CONTROLLERS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersController))
#define SOY_CONTROLLERS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))
#define SOY_CONTROLLERS_IS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_IS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))

typedef struct _soycontrollersController soycontrollersController;
typedef struct _soycontrollersControllerClass soycontrollersControllerClass;

#define SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER (soy_controllers_virtual_controller_get_type ())
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualController))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))

typedef struct _soycontrollersVirtualController soycontrollersVirtualController;
typedef struct _soycontrollersVirtualControllerClass soycontrollersVirtualControllerClass;

#define SOY_FIELDS_TYPE_FIELD (soy_fields_field_get_type ())
#define SOY_FIELDS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsField))
#define SOY_FIELDS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))
#define SOY_FIELDS_IS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_IS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_FIELD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))

typedef struct _soyfieldsField soyfieldsField;
typedef struct _soyfieldsFieldClass soyfieldsFieldClass;
#define _dmatrix3_free0(var) ((var == NULL) ? NULL : (var = (dmatrix3_free (var), NULL)))
#define _dvector3_free0(var) ((var == NULL) ? NULL : (var = (dvector3_free (var), NULL)))

struct _soyjointsJoint {
	GObject parent_instance;
	soyjointsJointPrivate * priv;
	struct dxJoint* joint;
	soyscenesScene* scene;
	soybodiesBody* bodyA;
	soybodiesBody* bodyB;
	GMutex mutex;
};

struct _soyjointsJointClass {
	GObjectClass parent_class;
	void (*create) (soyjointsJoint* self);
	void (*setup) (soyjointsJoint* self, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2);
	void (*render) (soyjointsJoint* self);
	void (*mult_model_matrix) (soyjointsJoint* self);
};

struct _soyjointsJointPrivate {
	GLfloat* _jointMtx;
	gint _jointMtx_length1;
	gint __jointMtx_size_;
	soymaterialsMaterial* _material;
};

struct _soybodiesBody {
	GObject parent_instance;
	soybodiesBodyPrivate * priv;
	struct dxBody* body;
	struct dxGeom* geom;
	gchar* key;
	GMutex mutex;
	soyscenesScene* scene;
	GeeHashMap* tags_;
};

struct _soybodiesBodyClass {
	GObjectClass parent_class;
	void (*create_geom) (soybodiesBody* self, GObject* geom_param, gfloat geom_scalar);
	void (*add_extra) (soybodiesBody* self);
	void (*remove_extra) (soybodiesBody* self);
	gfloat (*pointDepth) (soybodiesBody* self, gfloat x, gfloat y, gfloat z);
	gfloat (*volume) (soybodiesBody* self);
	gint (*finite) (soybodiesBody* self);
	void (*mult_model_matrix) (soybodiesBody* self);
	void (*render) (soybodiesBody* self);
	void (*calcFogCoords) (soybodiesBody* self, gfloat _depth);
};

struct _soyscenesScene {
	GObject parent_instance;
	soyscenesScenePrivate * priv;
	struct dxWorld* world;
	struct dxSpace* space;
	GRWLock stepLock;
	GeeHashSet* lights;
	GeeHashMap* bodies;
	GeeArrayList* joints;
	GeeHashSet* Controllers;
	GeeHashMap* fields;
};

struct _soyscenesSceneClass {
	GObjectClass parent_class;
	void (*do_in_step) (soyscenesScene* self);
	void (*render) (soyscenesScene* self, GLfloat fov, GLfloat aspect, GLfloat znear, GLfloat zfar);
};


static gpointer soy_joints_joint_parent_class = NULL;
extern soymaterialsMaterial* soy_default_material;

GType soy_joints_joint_get_type (void) G_GNUC_CONST;
GType soy_atoms_position_get_type (void) G_GNUC_CONST;
GType soy_atoms_axis_get_type (void) G_GNUC_CONST;
GType soy_scenes_scene_get_type (void) G_GNUC_CONST;
GType soy_bodies_body_get_type (void) G_GNUC_CONST;
GType soy_materials_material_get_type (void) G_GNUC_CONST;
#define SOY_JOINTS_JOINT_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SOY_JOINTS_TYPE_JOINT, soyjointsJointPrivate))
enum  {
	SOY_JOINTS_JOINT_DUMMY_PROPERTY,
	SOY_JOINTS_JOINT_MATERIAL
};
soyjointsJoint* soy_joints_joint_new (soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2, soymaterialsMaterial* material);
soyjointsJoint* soy_joints_joint_construct (GType object_type, soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2, soymaterialsMaterial* material);
soymaterialsMaterial* soy_materials_material_new (void);
soymaterialsMaterial* soy_materials_material_construct (GType object_type);
void soy_joints_joint_set_material (soyjointsJoint* self, soymaterialsMaterial* value);
GType soy_bodies_light_get_type (void) G_GNUC_CONST;
GType soy_controllers_controller_get_type (void) G_GNUC_CONST;
GType soy_controllers_virtual_controller_get_type (void) G_GNUC_CONST;
GType soy_fields_field_get_type (void) G_GNUC_CONST;
void soy_joints_joint_create (soyjointsJoint* self);
void soy_joints_joint_setup (soyjointsJoint* self, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2);
static void soy_joints_joint_real_create (soyjointsJoint* self);
static void soy_joints_joint_real_setup (soyjointsJoint* self, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2);
void soy_joints_joint_render (soyjointsJoint* self);
static void soy_joints_joint_real_render (soyjointsJoint* self);
void soy_joints_joint_mult_model_matrix (soyjointsJoint* self);
static void soy_joints_joint_real_mult_model_matrix (soyjointsJoint* self);
soymaterialsMaterial* soy_joints_joint_get_material (soyjointsJoint* self);
static GObject * soy_joints_joint_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
static void soy_joints_joint_finalize (GObject* obj);
static void _vala_soy_joints_joint_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_soy_joints_joint_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
static void _vala_clear_GMutex (GMutex * mutex);
static void _vala_clear_GRecMutex (GRecMutex * mutex);
static void _vala_clear_GRWLock (GRWLock * mutex);
static void _vala_clear_GCond (GCond * mutex);


soyjointsJoint* soy_joints_joint_construct (GType object_type, soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2, soymaterialsMaterial* material) {
	soyjointsJoint * self = NULL;
	soyscenesScene* _tmp0_;
	soybodiesBody* _tmp1_;
	soybodiesBody* _tmp2_;
	GLfloat* _tmp3_ = NULL;
	soybodiesBody* _tmp4_;
	struct dxBody* _tmp5_;
	dxVector3* _tmp6_ = NULL;
	dxVector3* posA;
	soybodiesBody* _tmp7_;
	struct dxBody* _tmp8_;
	dxVector3* _tmp9_ = NULL;
	dxVector3* posB;
	dxVector3* _tmp10_;
	dReal _tmp11_;
	dxVector3* _tmp12_;
	dReal _tmp13_;
	dxVector3* _tmp14_;
	dReal _tmp15_;
	dxVector3* _tmp16_;
	dReal _tmp17_;
	dxVector3* _tmp18_;
	dReal _tmp19_;
	dxVector3* _tmp20_;
	dReal _tmp21_;
	gdouble _tmp22_ = 0.0;
	dReal posAMag;
	dxVector3* _tmp23_;
	dxVector3* normA;
	dxVector3* _tmp24_;
	dxVector3* _tmp25_;
	dReal _tmp26_;
	dReal _tmp27_;
	dxVector3* _tmp28_;
	dxVector3* _tmp29_;
	dReal _tmp30_;
	dReal _tmp31_;
	dxVector3* _tmp32_;
	dxVector3* _tmp33_;
	dReal _tmp34_;
	dReal _tmp35_;
	dxVector3* _tmp36_;
	dxVector3* direction;
	dxVector3* _tmp37_;
	dxVector3* _tmp38_;
	dReal _tmp39_;
	dxVector3* _tmp40_;
	dReal _tmp41_;
	dxVector3* _tmp42_;
	dxVector3* _tmp43_;
	dReal _tmp44_;
	dxVector3* _tmp45_;
	dReal _tmp46_;
	dxVector3* _tmp47_;
	dxVector3* _tmp48_;
	dReal _tmp49_;
	dxVector3* _tmp50_;
	dReal _tmp51_;
	dxVector3* _tmp52_;
	dxVector3* relDirection;
	soybodiesBody* _tmp53_;
	struct dxBody* _tmp54_;
	dxVector3* _tmp55_;
	dReal _tmp56_;
	dxVector3* _tmp57_;
	dReal _tmp58_;
	dxVector3* _tmp59_;
	dReal _tmp60_;
	dxVector3* _tmp61_;
	dxVector3* _tmp62_;
	dReal _tmp63_;
	dxVector3* _tmp64_;
	dReal _tmp65_;
	dxVector3* _tmp66_;
	dReal _tmp67_;
	dxVector3* _tmp68_;
	dReal _tmp69_;
	dxVector3* _tmp70_;
	dReal _tmp71_;
	dxVector3* _tmp72_;
	dReal _tmp73_;
	gdouble _tmp74_ = 0.0;
	dReal relMag;
	dxVector3* _tmp75_;
	dxVector3* _tmp76_;
	dReal _tmp77_;
	dReal _tmp78_;
	dxVector3* _tmp79_;
	dxVector3* _tmp80_;
	dReal _tmp81_;
	dReal _tmp82_;
	dxVector3* _tmp83_;
	dxVector3* _tmp84_;
	dReal _tmp85_;
	dReal _tmp86_;
	dxVector3* _tmp87_;
	dReal _tmp88_;
	dxVector3* _tmp89_;
	dReal _tmp90_;
	dxVector3* _tmp91_;
	dReal _tmp92_;
	dxVector3* _tmp93_;
	dReal _tmp94_;
	dxVector3* _tmp95_;
	dReal _tmp96_;
	dxVector3* _tmp97_;
	dReal _tmp98_;
	dxVector3* _tmp99_;
	dReal _tmp100_;
	dxVector3* _tmp101_;
	dReal _tmp102_;
	dxVector3* _tmp103_;
	dReal _tmp104_;
	gdouble _tmp105_ = 0.0;
	dReal angle;
	dxVector3* _tmp106_;
	dReal _tmp107_;
	dxVector3* _tmp108_;
	dReal _tmp109_;
	dxVector3* _tmp110_;
	dReal _tmp111_;
	dxVector3* _tmp112_;
	dReal _tmp113_;
	dReal axisX;
	dxVector3* _tmp114_;
	dReal _tmp115_;
	dxVector3* _tmp116_;
	dReal _tmp117_;
	dxVector3* _tmp118_;
	dReal _tmp119_;
	dxVector3* _tmp120_;
	dReal _tmp121_;
	dReal axisY;
	dxVector3* _tmp122_;
	dReal _tmp123_;
	dxVector3* _tmp124_;
	dReal _tmp125_;
	dxVector3* _tmp126_;
	dReal _tmp127_;
	dxVector3* _tmp128_;
	dReal _tmp129_;
	dReal axisZ;
	dReal _tmp130_;
	dReal _tmp131_;
	dReal _tmp132_;
	dReal _tmp133_;
	dReal _tmp134_;
	dReal _tmp135_;
	gdouble _tmp136_ = 0.0;
	dReal length;
	dReal _tmp137_;
	dReal _tmp138_;
	dReal normX;
	dReal _tmp139_;
	dReal _tmp140_;
	dReal normY;
	dReal _tmp141_;
	dReal _tmp142_;
	dReal normZ;
	dReal _tmp143_;
	dReal _tmp144_;
	dReal _tmp145_;
	dxMatrix3* _tmp146_;
	dxMatrix3* jointRotation;
	dxMatrix3* _tmp147_;
	dReal _tmp148_;
	dReal _tmp149_;
	dReal _tmp150_;
	dReal _tmp151_;
	GLfloat* _tmp152_;
	gint _tmp152__length1;
	dxMatrix3* _tmp153_;
	dReal _tmp154_;
	GLfloat _tmp155_;
	GLfloat* _tmp156_;
	gint _tmp156__length1;
	dxMatrix3* _tmp157_;
	dReal _tmp158_;
	GLfloat _tmp159_;
	GLfloat* _tmp160_;
	gint _tmp160__length1;
	dxMatrix3* _tmp161_;
	dReal _tmp162_;
	GLfloat _tmp163_;
	GLfloat* _tmp164_;
	gint _tmp164__length1;
	GLfloat _tmp165_;
	GLfloat* _tmp166_;
	gint _tmp166__length1;
	dxMatrix3* _tmp167_;
	dReal _tmp168_;
	GLfloat _tmp169_;
	GLfloat* _tmp170_;
	gint _tmp170__length1;
	dxMatrix3* _tmp171_;
	dReal _tmp172_;
	GLfloat _tmp173_;
	GLfloat* _tmp174_;
	gint _tmp174__length1;
	dxMatrix3* _tmp175_;
	dReal _tmp176_;
	GLfloat _tmp177_;
	GLfloat* _tmp178_;
	gint _tmp178__length1;
	GLfloat _tmp179_;
	GLfloat* _tmp180_;
	gint _tmp180__length1;
	dxMatrix3* _tmp181_;
	dReal _tmp182_;
	GLfloat _tmp183_;
	GLfloat* _tmp184_;
	gint _tmp184__length1;
	dxMatrix3* _tmp185_;
	dReal _tmp186_;
	GLfloat _tmp187_;
	GLfloat* _tmp188_;
	gint _tmp188__length1;
	dxMatrix3* _tmp189_;
	dReal _tmp190_;
	GLfloat _tmp191_;
	GLfloat* _tmp192_;
	gint _tmp192__length1;
	GLfloat _tmp193_;
	GLfloat* _tmp194_;
	gint _tmp194__length1;
	GLfloat _tmp195_;
	GLfloat* _tmp196_;
	gint _tmp196__length1;
	GLfloat _tmp197_;
	GLfloat* _tmp198_;
	gint _tmp198__length1;
	GLfloat _tmp199_;
	GLfloat* _tmp200_;
	gint _tmp200__length1;
	GLfloat _tmp201_;
	soymaterialsMaterial* _tmp202_;
	soyscenesScene* _tmp207_;
	struct dxJoint* _tmp208_;
	soybodiesBody* _tmp209_;
	soyatomsPosition* _tmp218_;
	soyatomsAxis* _tmp219_;
	soyatomsAxis* _tmp220_;
	soyscenesScene* _tmp221_;
	GeeArrayList* _tmp222_;
	soyscenesScene* _tmp223_;
	g_return_val_if_fail (scene != NULL, NULL);
	g_return_val_if_fail (bodyA != NULL, NULL);
	self = (soyjointsJoint*) g_object_new (object_type, NULL);
	_tmp0_ = scene;
	self->scene = _tmp0_;
	_tmp1_ = bodyA;
	self->bodyA = _tmp1_;
	_tmp2_ = bodyB;
	self->bodyB = _tmp2_;
	_tmp3_ = g_new0 (GLfloat, 16);
	self->priv->_jointMtx = (g_free (self->priv->_jointMtx), NULL);
	self->priv->_jointMtx = _tmp3_;
	self->priv->_jointMtx_length1 = 16;
	self->priv->__jointMtx_size_ = self->priv->_jointMtx_length1;
	g_mutex_lock (&self->mutex);
	_tmp4_ = bodyA;
	_tmp5_ = _tmp4_->body;
	_tmp6_ = dBodyGetPosition (_tmp5_);
	posA = _tmp6_;
	_tmp7_ = bodyB;
	_tmp8_ = _tmp7_->body;
	_tmp9_ = dBodyGetPosition (_tmp8_);
	posB = _tmp9_;
	_tmp10_ = posA;
	_tmp11_ = _tmp10_->x;
	_tmp12_ = posA;
	_tmp13_ = _tmp12_->x;
	_tmp14_ = posA;
	_tmp15_ = _tmp14_->y;
	_tmp16_ = posA;
	_tmp17_ = _tmp16_->y;
	_tmp18_ = posA;
	_tmp19_ = _tmp18_->z;
	_tmp20_ = posA;
	_tmp21_ = _tmp20_->z;
	_tmp22_ = sqrt ((gdouble) (((_tmp11_ * _tmp13_) + (_tmp15_ * _tmp17_)) + (_tmp19_ * _tmp21_)));
	posAMag = (dReal) _tmp22_;
	_tmp23_ = dvector3_new ();
	normA = _tmp23_;
	_tmp24_ = normA;
	_tmp25_ = posA;
	_tmp26_ = _tmp25_->x;
	_tmp27_ = posAMag;
	_tmp24_->x = _tmp26_ / _tmp27_;
	_tmp28_ = normA;
	_tmp29_ = posA;
	_tmp30_ = _tmp29_->y;
	_tmp31_ = posAMag;
	_tmp28_->y = _tmp30_ / _tmp31_;
	_tmp32_ = normA;
	_tmp33_ = posA;
	_tmp34_ = _tmp33_->z;
	_tmp35_ = posAMag;
	_tmp32_->z = _tmp34_ / _tmp35_;
	_tmp36_ = dvector3_new ();
	direction = _tmp36_;
	_tmp37_ = direction;
	_tmp38_ = posA;
	_tmp39_ = _tmp38_->x;
	_tmp40_ = posB;
	_tmp41_ = _tmp40_->x;
	_tmp37_->x = _tmp39_ + _tmp41_;
	_tmp42_ = direction;
	_tmp43_ = posA;
	_tmp44_ = _tmp43_->y;
	_tmp45_ = posB;
	_tmp46_ = _tmp45_->y;
	_tmp42_->y = _tmp44_ + _tmp46_;
	_tmp47_ = direction;
	_tmp48_ = posA;
	_tmp49_ = _tmp48_->z;
	_tmp50_ = posB;
	_tmp51_ = _tmp50_->z;
	_tmp47_->z = _tmp49_ + _tmp51_;
	_tmp52_ = dvector3_new ();
	relDirection = _tmp52_;
	_tmp53_ = bodyA;
	_tmp54_ = _tmp53_->body;
	_tmp55_ = direction;
	_tmp56_ = _tmp55_->x;
	_tmp57_ = direction;
	_tmp58_ = _tmp57_->y;
	_tmp59_ = direction;
	_tmp60_ = _tmp59_->z;
	_tmp61_ = relDirection;
	dBodyGetRelPointPos (_tmp54_, _tmp56_, _tmp58_, _tmp60_, _tmp61_);
	_tmp62_ = relDirection;
	_tmp63_ = _tmp62_->x;
	_tmp64_ = relDirection;
	_tmp65_ = _tmp64_->x;
	_tmp66_ = relDirection;
	_tmp67_ = _tmp66_->y;
	_tmp68_ = relDirection;
	_tmp69_ = _tmp68_->y;
	_tmp70_ = relDirection;
	_tmp71_ = _tmp70_->z;
	_tmp72_ = relDirection;
	_tmp73_ = _tmp72_->z;
	_tmp74_ = sqrt ((gdouble) (((_tmp63_ * _tmp65_) + (_tmp67_ * _tmp69_)) + (_tmp71_ * _tmp73_)));
	relMag = (dReal) _tmp74_;
	_tmp75_ = relDirection;
	_tmp76_ = relDirection;
	_tmp77_ = _tmp76_->x;
	_tmp78_ = relMag;
	_tmp76_->x = _tmp77_ / _tmp78_;
	_tmp79_ = relDirection;
	_tmp80_ = relDirection;
	_tmp81_ = _tmp80_->y;
	_tmp82_ = relMag;
	_tmp80_->y = _tmp81_ / _tmp82_;
	_tmp83_ = relDirection;
	_tmp84_ = relDirection;
	_tmp85_ = _tmp84_->z;
	_tmp86_ = relMag;
	_tmp84_->z = _tmp85_ / _tmp86_;
	_tmp87_ = relDirection;
	_tmp88_ = _tmp87_->x;
	_tmp89_ = relDirection;
	_tmp90_ = _tmp89_->y;
	_tmp91_ = relDirection;
	_tmp92_ = _tmp91_->z;
	g_print ("%f, %f, %f\n", (gdouble) _tmp88_, (gdouble) _tmp90_, (gdouble) _tmp92_);
	_tmp93_ = normA;
	_tmp94_ = _tmp93_->x;
	_tmp95_ = relDirection;
	_tmp96_ = _tmp95_->x;
	_tmp97_ = normA;
	_tmp98_ = _tmp97_->y;
	_tmp99_ = relDirection;
	_tmp100_ = _tmp99_->y;
	_tmp101_ = normA;
	_tmp102_ = _tmp101_->z;
	_tmp103_ = relDirection;
	_tmp104_ = _tmp103_->z;
	_tmp105_ = acos ((gdouble) (((_tmp94_ * _tmp96_) + (_tmp98_ * _tmp100_)) + (_tmp102_ * _tmp104_)));
	angle = (dReal) _tmp105_;
	_tmp106_ = posA;
	_tmp107_ = _tmp106_->y;
	_tmp108_ = relDirection;
	_tmp109_ = _tmp108_->z;
	_tmp110_ = posA;
	_tmp111_ = _tmp110_->z;
	_tmp112_ = relDirection;
	_tmp113_ = _tmp112_->y;
	axisX = (dReal) ((_tmp107_ * _tmp109_) - (_tmp111_ * _tmp113_));
	_tmp114_ = posA;
	_tmp115_ = _tmp114_->z;
	_tmp116_ = relDirection;
	_tmp117_ = _tmp116_->x;
	_tmp118_ = posA;
	_tmp119_ = _tmp118_->x;
	_tmp120_ = relDirection;
	_tmp121_ = _tmp120_->z;
	axisY = (dReal) ((_tmp115_ * _tmp117_) - (_tmp119_ * _tmp121_));
	_tmp122_ = posA;
	_tmp123_ = _tmp122_->x;
	_tmp124_ = relDirection;
	_tmp125_ = _tmp124_->y;
	_tmp126_ = posA;
	_tmp127_ = _tmp126_->y;
	_tmp128_ = relDirection;
	_tmp129_ = _tmp128_->x;
	axisZ = (dReal) ((_tmp123_ * _tmp125_) - (_tmp127_ * _tmp129_));
	_tmp130_ = axisX;
	_tmp131_ = axisX;
	_tmp132_ = axisY;
	_tmp133_ = axisY;
	_tmp134_ = axisZ;
	_tmp135_ = axisZ;
	_tmp136_ = sqrt ((gdouble) (((_tmp130_ * _tmp131_) + (_tmp132_ * _tmp133_)) + (_tmp134_ * _tmp135_)));
	length = (dReal) _tmp136_;
	_tmp137_ = axisX;
	_tmp138_ = length;
	normX = ((dReal) _tmp137_) / _tmp138_;
	_tmp139_ = axisY;
	_tmp140_ = length;
	normY = ((dReal) _tmp139_) / _tmp140_;
	_tmp141_ = axisZ;
	_tmp142_ = length;
	normZ = ((dReal) _tmp141_) / _tmp142_;
	_tmp143_ = axisX;
	g_print ("axisX: %f\n", (gdouble) _tmp143_);
	_tmp144_ = axisY;
	g_print ("axisY: %f\n", (gdouble) _tmp144_);
	_tmp145_ = axisZ;
	g_print ("axisZ: %f\n", (gdouble) _tmp145_);
	_tmp146_ = dmatrix3_new ();
	jointRotation = _tmp146_;
	_tmp147_ = jointRotation;
	_tmp148_ = normX;
	_tmp149_ = normY;
	_tmp150_ = normZ;
	_tmp151_ = angle;
	dRFromAxisAndAngle (_tmp147_, _tmp148_, _tmp149_, _tmp150_, _tmp151_);
	_tmp152_ = self->priv->_jointMtx;
	_tmp152__length1 = self->priv->_jointMtx_length1;
	_tmp153_ = jointRotation;
	_tmp154_ = _tmp153_->m0;
	_tmp152_[0] = (GLfloat) _tmp154_;
	_tmp155_ = _tmp152_[0];
	_tmp156_ = self->priv->_jointMtx;
	_tmp156__length1 = self->priv->_jointMtx_length1;
	_tmp157_ = jointRotation;
	_tmp158_ = _tmp157_->m4;
	_tmp156_[1] = (GLfloat) _tmp158_;
	_tmp159_ = _tmp156_[1];
	_tmp160_ = self->priv->_jointMtx;
	_tmp160__length1 = self->priv->_jointMtx_length1;
	_tmp161_ = jointRotation;
	_tmp162_ = _tmp161_->m8;
	_tmp160_[2] = (GLfloat) _tmp162_;
	_tmp163_ = _tmp160_[2];
	_tmp164_ = self->priv->_jointMtx;
	_tmp164__length1 = self->priv->_jointMtx_length1;
	_tmp164_[3] = (GLfloat) 0.0;
	_tmp165_ = _tmp164_[3];
	_tmp166_ = self->priv->_jointMtx;
	_tmp166__length1 = self->priv->_jointMtx_length1;
	_tmp167_ = jointRotation;
	_tmp168_ = _tmp167_->m1;
	_tmp166_[4] = (GLfloat) _tmp168_;
	_tmp169_ = _tmp166_[4];
	_tmp170_ = self->priv->_jointMtx;
	_tmp170__length1 = self->priv->_jointMtx_length1;
	_tmp171_ = jointRotation;
	_tmp172_ = _tmp171_->m5;
	_tmp170_[5] = (GLfloat) _tmp172_;
	_tmp173_ = _tmp170_[5];
	_tmp174_ = self->priv->_jointMtx;
	_tmp174__length1 = self->priv->_jointMtx_length1;
	_tmp175_ = jointRotation;
	_tmp176_ = _tmp175_->m9;
	_tmp174_[6] = (GLfloat) _tmp176_;
	_tmp177_ = _tmp174_[6];
	_tmp178_ = self->priv->_jointMtx;
	_tmp178__length1 = self->priv->_jointMtx_length1;
	_tmp178_[7] = (GLfloat) 0.0;
	_tmp179_ = _tmp178_[7];
	_tmp180_ = self->priv->_jointMtx;
	_tmp180__length1 = self->priv->_jointMtx_length1;
	_tmp181_ = jointRotation;
	_tmp182_ = _tmp181_->m2;
	_tmp180_[8] = (GLfloat) _tmp182_;
	_tmp183_ = _tmp180_[8];
	_tmp184_ = self->priv->_jointMtx;
	_tmp184__length1 = self->priv->_jointMtx_length1;
	_tmp185_ = jointRotation;
	_tmp186_ = _tmp185_->m6;
	_tmp184_[9] = (GLfloat) _tmp186_;
	_tmp187_ = _tmp184_[9];
	_tmp188_ = self->priv->_jointMtx;
	_tmp188__length1 = self->priv->_jointMtx_length1;
	_tmp189_ = jointRotation;
	_tmp190_ = _tmp189_->ma;
	_tmp188_[10] = (GLfloat) _tmp190_;
	_tmp191_ = _tmp188_[10];
	_tmp192_ = self->priv->_jointMtx;
	_tmp192__length1 = self->priv->_jointMtx_length1;
	_tmp192_[11] = (GLfloat) 0.0;
	_tmp193_ = _tmp192_[11];
	_tmp194_ = self->priv->_jointMtx;
	_tmp194__length1 = self->priv->_jointMtx_length1;
	_tmp194_[12] = (GLfloat) 0.0;
	_tmp195_ = _tmp194_[12];
	_tmp196_ = self->priv->_jointMtx;
	_tmp196__length1 = self->priv->_jointMtx_length1;
	_tmp196_[13] = (GLfloat) 0.0;
	_tmp197_ = _tmp196_[13];
	_tmp198_ = self->priv->_jointMtx;
	_tmp198__length1 = self->priv->_jointMtx_length1;
	_tmp198_[14] = (GLfloat) 0.0;
	_tmp199_ = _tmp198_[14];
	_tmp200_ = self->priv->_jointMtx;
	_tmp200__length1 = self->priv->_jointMtx_length1;
	_tmp200_[15] = (GLfloat) 1.0;
	_tmp201_ = _tmp200_[15];
	g_mutex_unlock (&self->mutex);
	_tmp202_ = material;
	if (_tmp202_ == NULL) {
		soymaterialsMaterial* _tmp203_;
		soymaterialsMaterial* _tmp205_;
		_tmp203_ = soy_default_material;
		if (_tmp203_ == NULL) {
			soymaterialsMaterial* _tmp204_;
			_tmp204_ = soy_materials_material_new ();
			_g_object_unref0 (soy_default_material);
			soy_default_material = _tmp204_;
		}
		_tmp205_ = soy_default_material;
		soy_joints_joint_set_material (self, _tmp205_);
	} else {
		soymaterialsMaterial* _tmp206_;
		_tmp206_ = material;
		soy_joints_joint_set_material (self, _tmp206_);
	}
	_tmp207_ = scene;
	g_rw_lock_writer_lock (&_tmp207_->stepLock);
	soy_joints_joint_create (self);
	_tmp208_ = self->joint;
	dJointSetData (_tmp208_, (void*) self);
	_tmp209_ = bodyB;
	if (_tmp209_ == NULL) {
		struct dxJoint* _tmp210_;
		soybodiesBody* _tmp211_;
		struct dxBody* _tmp212_;
		_tmp210_ = self->joint;
		_tmp211_ = bodyA;
		_tmp212_ = _tmp211_->body;
		dJointAttach (_tmp210_, _tmp212_, NULL);
	} else {
		struct dxJoint* _tmp213_;
		soybodiesBody* _tmp214_;
		struct dxBody* _tmp215_;
		soybodiesBody* _tmp216_;
		struct dxBody* _tmp217_;
		_tmp213_ = self->joint;
		_tmp214_ = bodyA;
		_tmp215_ = _tmp214_->body;
		_tmp216_ = bodyB;
		_tmp217_ = _tmp216_->body;
		dJointAttach (_tmp213_, _tmp215_, _tmp217_);
	}
	_tmp218_ = anchor;
	_tmp219_ = axis1;
	_tmp220_ = axis2;
	soy_joints_joint_setup (self, _tmp218_, _tmp219_, _tmp220_);
	_tmp221_ = scene;
	_tmp222_ = _tmp221_->joints;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp222_, self);
	_tmp223_ = scene;
	g_rw_lock_writer_unlock (&_tmp223_->stepLock);
	_dmatrix3_free0 (jointRotation);
	_dvector3_free0 (relDirection);
	_dvector3_free0 (direction);
	_dvector3_free0 (normA);
	return self;
}


soyjointsJoint* soy_joints_joint_new (soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2, soymaterialsMaterial* material) {
	return soy_joints_joint_construct (SOY_JOINTS_TYPE_JOINT, scene, bodyA, bodyB, anchor, axis1, axis2, material);
}


static void soy_joints_joint_real_create (soyjointsJoint* self) {
	soyscenesScene* _tmp0_;
	struct dxWorld* _tmp1_;
	struct dxJoint* _tmp2_;
	_tmp0_ = self->scene;
	_tmp1_ = _tmp0_->world;
	_tmp2_ = dJointCreateNull (_tmp1_, NULL);
	_dJointDestroy0 (self->joint);
	self->joint = _tmp2_;
}


void soy_joints_joint_create (soyjointsJoint* self) {
	g_return_if_fail (self != NULL);
	SOY_JOINTS_JOINT_GET_CLASS (self)->create (self);
}


static void soy_joints_joint_real_setup (soyjointsJoint* self, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2) {
	return;
}


void soy_joints_joint_setup (soyjointsJoint* self, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2) {
	g_return_if_fail (self != NULL);
	SOY_JOINTS_JOINT_GET_CLASS (self)->setup (self, anchor, axis1, axis2);
}


static void soy_joints_joint_real_render (soyjointsJoint* self) {
	return;
}


void soy_joints_joint_render (soyjointsJoint* self) {
	g_return_if_fail (self != NULL);
	SOY_JOINTS_JOINT_GET_CLASS (self)->render (self);
}


static void soy_joints_joint_real_mult_model_matrix (soyjointsJoint* self) {
	GLfloat* _tmp0_ = NULL;
	GLfloat* _mtx;
	gint _mtx_length1;
	gint __mtx_size_;
	soybodiesBody* _tmp1_;
	struct dxBody* _tmp2_;
	dxMatrix3* _tmp3_ = NULL;
	dxMatrix3* rotationA;
	soybodiesBody* _tmp4_;
	struct dxBody* _tmp5_;
	dxVector3* _tmp6_ = NULL;
	dxVector3* positionA;
	dReal _tmp7_;
	GLfloat _tmp8_;
	dReal _tmp9_;
	GLfloat _tmp10_;
	dReal _tmp11_;
	GLfloat _tmp12_;
	GLfloat _tmp13_;
	dReal _tmp14_;
	GLfloat _tmp15_;
	dReal _tmp16_;
	GLfloat _tmp17_;
	dReal _tmp18_;
	GLfloat _tmp19_;
	GLfloat _tmp20_;
	dReal _tmp21_;
	GLfloat _tmp22_;
	dReal _tmp23_;
	GLfloat _tmp24_;
	dReal _tmp25_;
	GLfloat _tmp26_;
	GLfloat _tmp27_;
	dReal _tmp28_;
	GLfloat _tmp29_;
	dReal _tmp30_;
	GLfloat _tmp31_;
	dReal _tmp32_;
	GLfloat _tmp33_;
	GLfloat _tmp34_;
	_tmp0_ = g_new0 (GLfloat, 16);
	_mtx = _tmp0_;
	_mtx_length1 = 16;
	__mtx_size_ = _mtx_length1;
	_tmp1_ = self->bodyA;
	_tmp2_ = _tmp1_->body;
	_tmp3_ = dBodyGetRotation (_tmp2_);
	rotationA = _tmp3_;
	_tmp4_ = self->bodyA;
	_tmp5_ = _tmp4_->body;
	_tmp6_ = dBodyGetPosition (_tmp5_);
	positionA = _tmp6_;
	_tmp7_ = rotationA->m0;
	_mtx[0] = (GLfloat) _tmp7_;
	_tmp8_ = _mtx[0];
	_tmp9_ = rotationA->m4;
	_mtx[1] = (GLfloat) _tmp9_;
	_tmp10_ = _mtx[1];
	_tmp11_ = rotationA->m8;
	_mtx[2] = (GLfloat) _tmp11_;
	_tmp12_ = _mtx[2];
	_mtx[3] = (GLfloat) 0.0;
	_tmp13_ = _mtx[3];
	_tmp14_ = rotationA->m1;
	_mtx[4] = (GLfloat) _tmp14_;
	_tmp15_ = _mtx[4];
	_tmp16_ = rotationA->m5;
	_mtx[5] = (GLfloat) _tmp16_;
	_tmp17_ = _mtx[5];
	_tmp18_ = rotationA->m9;
	_mtx[6] = (GLfloat) _tmp18_;
	_tmp19_ = _mtx[6];
	_mtx[7] = (GLfloat) 0.0;
	_tmp20_ = _mtx[7];
	_tmp21_ = rotationA->m2;
	_mtx[8] = (GLfloat) _tmp21_;
	_tmp22_ = _mtx[8];
	_tmp23_ = rotationA->m6;
	_mtx[9] = (GLfloat) _tmp23_;
	_tmp24_ = _mtx[9];
	_tmp25_ = rotationA->ma;
	_mtx[10] = (GLfloat) _tmp25_;
	_tmp26_ = _mtx[10];
	_mtx[11] = (GLfloat) 0.0;
	_tmp27_ = _mtx[11];
	_tmp28_ = positionA->x;
	_mtx[12] = (GLfloat) _tmp28_;
	_tmp29_ = _mtx[12];
	_tmp30_ = positionA->y;
	_mtx[13] = (GLfloat) _tmp30_;
	_tmp31_ = _mtx[13];
	_tmp32_ = positionA->z;
	_mtx[14] = (GLfloat) _tmp32_;
	_tmp33_ = _mtx[14];
	_mtx[15] = (GLfloat) 1.0;
	_tmp34_ = _mtx[15];
	glMultMatrixf (_mtx);
	_mtx = (g_free (_mtx), NULL);
}


void soy_joints_joint_mult_model_matrix (soyjointsJoint* self) {
	g_return_if_fail (self != NULL);
	SOY_JOINTS_JOINT_GET_CLASS (self)->mult_model_matrix (self);
}


soymaterialsMaterial* soy_joints_joint_get_material (soyjointsJoint* self) {
	soymaterialsMaterial* result;
	soymaterialsMaterial* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = self->priv->_material;
	result = _tmp0_;
	return result;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


void soy_joints_joint_set_material (soyjointsJoint* self, soymaterialsMaterial* value) {
	soymaterialsMaterial* _tmp0_;
	soymaterialsMaterial* _tmp1_;
	g_return_if_fail (self != NULL);
	g_mutex_lock (&self->mutex);
	_tmp0_ = value;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	_g_object_unref0 (self->priv->_material);
	self->priv->_material = _tmp1_;
	g_mutex_unlock (&self->mutex);
	g_object_notify ((GObject *) self, "material");
}


static GObject * soy_joints_joint_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	soyjointsJoint * self;
	parent_class = G_OBJECT_CLASS (soy_joints_joint_parent_class);
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_JOINTS_TYPE_JOINT, soyjointsJoint);
	_vala_clear_GMutex (&self->mutex);
	g_mutex_init (&self->mutex);
	return obj;
}


static void soy_joints_joint_class_init (soyjointsJointClass * klass) {
	soy_joints_joint_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (soyjointsJointPrivate));
	SOY_JOINTS_JOINT_CLASS (klass)->create = soy_joints_joint_real_create;
	SOY_JOINTS_JOINT_CLASS (klass)->setup = soy_joints_joint_real_setup;
	SOY_JOINTS_JOINT_CLASS (klass)->render = soy_joints_joint_real_render;
	SOY_JOINTS_JOINT_CLASS (klass)->mult_model_matrix = soy_joints_joint_real_mult_model_matrix;
	G_OBJECT_CLASS (klass)->get_property = _vala_soy_joints_joint_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_soy_joints_joint_set_property;
	G_OBJECT_CLASS (klass)->constructor = soy_joints_joint_constructor;
	G_OBJECT_CLASS (klass)->finalize = soy_joints_joint_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), SOY_JOINTS_JOINT_MATERIAL, g_param_spec_object ("material", "material", "material", SOY_MATERIALS_TYPE_MATERIAL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
}


static void soy_joints_joint_instance_init (soyjointsJoint * self) {
	self->priv = SOY_JOINTS_JOINT_GET_PRIVATE (self);
}


static void soy_joints_joint_finalize (GObject* obj) {
	soyjointsJoint * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_JOINTS_TYPE_JOINT, soyjointsJoint);
	_dJointDestroy0 (self->joint);
	_vala_clear_GMutex (&self->mutex);
	self->priv->_jointMtx = (g_free (self->priv->_jointMtx), NULL);
	_g_object_unref0 (self->priv->_material);
	G_OBJECT_CLASS (soy_joints_joint_parent_class)->finalize (obj);
}


GType soy_joints_joint_get_type (void) {
	static volatile gsize soy_joints_joint_type_id__volatile = 0;
	if (g_once_init_enter (&soy_joints_joint_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soyjointsJointClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_joints_joint_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soyjointsJoint), 0, (GInstanceInitFunc) soy_joints_joint_instance_init, NULL };
		GType soy_joints_joint_type_id;
		soy_joints_joint_type_id = g_type_register_static (G_TYPE_OBJECT, "soyjointsJoint", &g_define_type_info, 0);
		g_once_init_leave (&soy_joints_joint_type_id__volatile, soy_joints_joint_type_id);
	}
	return soy_joints_joint_type_id__volatile;
}


static void _vala_soy_joints_joint_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	soyjointsJoint * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_JOINTS_TYPE_JOINT, soyjointsJoint);
	switch (property_id) {
		case SOY_JOINTS_JOINT_MATERIAL:
		g_value_set_object (value, soy_joints_joint_get_material (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_soy_joints_joint_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	soyjointsJoint * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, SOY_JOINTS_TYPE_JOINT, soyjointsJoint);
	switch (property_id) {
		case SOY_JOINTS_JOINT_MATERIAL:
		soy_joints_joint_set_material (self, g_value_get_object (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_clear_GMutex (GMutex * mutex) {
	GMutex zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GMutex))) {
		g_mutex_clear (mutex);
		memset (mutex, 0, sizeof (GMutex));
	}
}


static void _vala_clear_GRecMutex (GRecMutex * mutex) {
	GRecMutex zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GRecMutex))) {
		g_rec_mutex_clear (mutex);
		memset (mutex, 0, sizeof (GRecMutex));
	}
}


static void _vala_clear_GRWLock (GRWLock * mutex) {
	GRWLock zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GRWLock))) {
		g_rw_lock_clear (mutex);
		memset (mutex, 0, sizeof (GRWLock));
	}
}


static void _vala_clear_GCond (GCond * mutex) {
	GCond zero_mutex = { 0 };
	if (memcmp (mutex, &zero_mutex, sizeof (GCond))) {
		g_cond_clear (mutex);
		memset (mutex, 0, sizeof (GCond));
	}
}



