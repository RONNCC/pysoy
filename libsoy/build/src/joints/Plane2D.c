/* Plane2D.c generated by valac 0.18.1, the Vala compiler
 * generated from Plane2D.gs, do not modify */

/*
 *  libsoy - soy.joints.Plane2D
 *  Copyright (C) 2006,2007,2008,2009,2010,2011,2012 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 *
 */

#include <glib.h>
#include <glib-object.h>
#include <soy-1/ode.h>
#include <GLES/gl.h>
#include <GLES/glext.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>


#define SOY_JOINTS_TYPE_JOINT (soy_joints_joint_get_type ())
#define SOY_JOINTS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJoint))
#define SOY_JOINTS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))
#define SOY_JOINTS_IS_JOINT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_IS_JOINT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_JOINTS_TYPE_JOINT))
#define SOY_JOINTS_JOINT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_JOINTS_TYPE_JOINT, soyjointsJointClass))

typedef struct _soyjointsJoint soyjointsJoint;
typedef struct _soyjointsJointClass soyjointsJointClass;
typedef struct _soyjointsJointPrivate soyjointsJointPrivate;

#define SOY_ATOMS_TYPE_POSITION (soy_atoms_position_get_type ())
#define SOY_ATOMS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPosition))
#define SOY_ATOMS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))
#define SOY_ATOMS_IS_POSITION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_IS_POSITION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_POSITION))
#define SOY_ATOMS_POSITION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_POSITION, soyatomsPositionClass))

typedef struct _soyatomsPosition soyatomsPosition;
typedef struct _soyatomsPositionClass soyatomsPositionClass;

#define SOY_ATOMS_TYPE_AXIS (soy_atoms_axis_get_type ())
#define SOY_ATOMS_AXIS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_ATOMS_TYPE_AXIS, soyatomsAxis))
#define SOY_ATOMS_AXIS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_ATOMS_TYPE_AXIS, soyatomsAxisClass))
#define SOY_ATOMS_IS_AXIS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_ATOMS_TYPE_AXIS))
#define SOY_ATOMS_IS_AXIS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_ATOMS_TYPE_AXIS))
#define SOY_ATOMS_AXIS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_ATOMS_TYPE_AXIS, soyatomsAxisClass))

typedef struct _soyatomsAxis soyatomsAxis;
typedef struct _soyatomsAxisClass soyatomsAxisClass;

#define SOY_SCENES_TYPE_SCENE (soy_scenes_scene_get_type ())
#define SOY_SCENES_SCENE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_SCENES_TYPE_SCENE, soyscenesScene))
#define SOY_SCENES_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))
#define SOY_SCENES_IS_SCENE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_IS_SCENE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_SCENES_TYPE_SCENE))
#define SOY_SCENES_SCENE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_SCENES_TYPE_SCENE, soyscenesSceneClass))

typedef struct _soyscenesScene soyscenesScene;
typedef struct _soyscenesSceneClass soyscenesSceneClass;

#define SOY_BODIES_TYPE_BODY (soy_bodies_body_get_type ())
#define SOY_BODIES_BODY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_BODY, soybodiesBody))
#define SOY_BODIES_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))
#define SOY_BODIES_IS_BODY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_IS_BODY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_BODY))
#define SOY_BODIES_BODY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_BODY, soybodiesBodyClass))

typedef struct _soybodiesBody soybodiesBody;
typedef struct _soybodiesBodyClass soybodiesBodyClass;

#define SOY_JOINTS_TYPE_PLANE2_D (soy_joints_plane2_d_get_type ())
#define SOY_JOINTS_PLANE2_D(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_JOINTS_TYPE_PLANE2_D, soyjointsPlane2D))
#define SOY_JOINTS_PLANE2_D_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_JOINTS_TYPE_PLANE2_D, soyjointsPlane2DClass))
#define SOY_JOINTS_IS_PLANE2_D(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_JOINTS_TYPE_PLANE2_D))
#define SOY_JOINTS_IS_PLANE2_D_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_JOINTS_TYPE_PLANE2_D))
#define SOY_JOINTS_PLANE2_D_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_JOINTS_TYPE_PLANE2_D, soyjointsPlane2DClass))

typedef struct _soyjointsPlane2D soyjointsPlane2D;
typedef struct _soyjointsPlane2DClass soyjointsPlane2DClass;
typedef struct _soyjointsPlane2DPrivate soyjointsPlane2DPrivate;

#define SOY_MATERIALS_TYPE_MATERIAL (soy_materials_material_get_type ())
#define SOY_MATERIALS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterial))
#define SOY_MATERIALS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))
#define SOY_MATERIALS_IS_MATERIAL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_IS_MATERIAL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_MATERIALS_TYPE_MATERIAL))
#define SOY_MATERIALS_MATERIAL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_MATERIALS_TYPE_MATERIAL, soymaterialsMaterialClass))

typedef struct _soymaterialsMaterial soymaterialsMaterial;
typedef struct _soymaterialsMaterialClass soymaterialsMaterialClass;
typedef struct _soyscenesScenePrivate soyscenesScenePrivate;

#define SOY_BODIES_TYPE_LIGHT (soy_bodies_light_get_type ())
#define SOY_BODIES_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLight))
#define SOY_BODIES_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))
#define SOY_BODIES_IS_LIGHT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_IS_LIGHT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_BODIES_TYPE_LIGHT))
#define SOY_BODIES_LIGHT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_BODIES_TYPE_LIGHT, soybodiesLightClass))

typedef struct _soybodiesLight soybodiesLight;
typedef struct _soybodiesLightClass soybodiesLightClass;

#define SOY_CONTROLLERS_TYPE_CONTROLLER (soy_controllers_controller_get_type ())
#define SOY_CONTROLLERS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersController))
#define SOY_CONTROLLERS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))
#define SOY_CONTROLLERS_IS_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_IS_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_CONTROLLER))
#define SOY_CONTROLLERS_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_CONTROLLER, soycontrollersControllerClass))

typedef struct _soycontrollersController soycontrollersController;
typedef struct _soycontrollersControllerClass soycontrollersControllerClass;

#define SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER (soy_controllers_virtual_controller_get_type ())
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualController))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_IS_VIRTUAL_CONTROLLER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER))
#define SOY_CONTROLLERS_VIRTUAL_CONTROLLER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_CONTROLLERS_TYPE_VIRTUAL_CONTROLLER, soycontrollersVirtualControllerClass))

typedef struct _soycontrollersVirtualController soycontrollersVirtualController;
typedef struct _soycontrollersVirtualControllerClass soycontrollersVirtualControllerClass;

#define SOY_FIELDS_TYPE_FIELD (soy_fields_field_get_type ())
#define SOY_FIELDS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsField))
#define SOY_FIELDS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))
#define SOY_FIELDS_IS_FIELD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_IS_FIELD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_FIELDS_TYPE_FIELD))
#define SOY_FIELDS_FIELD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_FIELDS_TYPE_FIELD, soyfieldsFieldClass))

typedef struct _soyfieldsField soyfieldsField;
typedef struct _soyfieldsFieldClass soyfieldsFieldClass;
#define _dJointDestroy0(var) ((var == NULL) ? NULL : (var = (dJointDestroy (var), NULL)))

struct _soyjointsJoint {
	GObject parent_instance;
	soyjointsJointPrivate * priv;
	struct dxJoint* joint;
	soyscenesScene* scene;
	soybodiesBody* bodyA;
	soybodiesBody* bodyB;
	GMutex mutex;
};

struct _soyjointsJointClass {
	GObjectClass parent_class;
	void (*create) (soyjointsJoint* self);
	void (*setup) (soyjointsJoint* self, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2);
	void (*render) (soyjointsJoint* self);
	void (*mult_model_matrix) (soyjointsJoint* self);
};

struct _soyjointsPlane2D {
	soyjointsJoint parent_instance;
	soyjointsPlane2DPrivate * priv;
};

struct _soyjointsPlane2DClass {
	soyjointsJointClass parent_class;
};

struct _soyscenesScene {
	GObject parent_instance;
	soyscenesScenePrivate * priv;
	struct dxWorld* world;
	struct dxSpace* space;
	GRWLock stepLock;
	GeeHashSet* lights;
	GeeHashMap* bodies;
	GeeArrayList* joints;
	GeeHashSet* Controllers;
	GeeHashMap* fields;
};

struct _soyscenesSceneClass {
	GObjectClass parent_class;
	void (*do_in_step) (soyscenesScene* self);
	void (*render) (soyscenesScene* self, GLfloat fov, GLfloat aspect, GLfloat znear, GLfloat zfar);
};


static gpointer soy_joints_plane2_d_parent_class = NULL;

GType soy_joints_joint_get_type (void) G_GNUC_CONST;
GType soy_atoms_position_get_type (void) G_GNUC_CONST;
GType soy_atoms_axis_get_type (void) G_GNUC_CONST;
GType soy_scenes_scene_get_type (void) G_GNUC_CONST;
GType soy_bodies_body_get_type (void) G_GNUC_CONST;
GType soy_joints_plane2_d_get_type (void) G_GNUC_CONST;
enum  {
	SOY_JOINTS_PLANE2_D_DUMMY_PROPERTY
};
GType soy_materials_material_get_type (void) G_GNUC_CONST;
soyjointsPlane2D* soy_joints_plane2_d_new (soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soymaterialsMaterial* material);
soyjointsPlane2D* soy_joints_plane2_d_construct (GType object_type, soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soymaterialsMaterial* material);
soyjointsJoint* soy_joints_joint_new (soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2, soymaterialsMaterial* material);
soyjointsJoint* soy_joints_joint_construct (GType object_type, soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soyatomsPosition* anchor, soyatomsAxis* axis1, soyatomsAxis* axis2, soymaterialsMaterial* material);
static void soy_joints_plane2_d_real_create (soyjointsJoint* base);
GType soy_bodies_light_get_type (void) G_GNUC_CONST;
GType soy_controllers_controller_get_type (void) G_GNUC_CONST;
GType soy_controllers_virtual_controller_get_type (void) G_GNUC_CONST;
GType soy_fields_field_get_type (void) G_GNUC_CONST;
void soy_joints_plane2_d_setXParam (soyjointsPlane2D* self, gint param, dReal val);
void soy_joints_plane2_d_setYParam (soyjointsPlane2D* self, gint param, dReal val);
void soy_joints_plane2_d_setAngleParam (soyjointsPlane2D* self, gint param, dReal val);


soyjointsPlane2D* soy_joints_plane2_d_construct (GType object_type, soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soymaterialsMaterial* material) {
	soyjointsPlane2D * self = NULL;
	soyscenesScene* _tmp0_;
	soybodiesBody* _tmp1_;
	soybodiesBody* _tmp2_;
	soymaterialsMaterial* _tmp3_;
	g_return_val_if_fail (scene != NULL, NULL);
	g_return_val_if_fail (bodyA != NULL, NULL);
	_tmp0_ = scene;
	_tmp1_ = bodyA;
	_tmp2_ = bodyB;
	_tmp3_ = material;
	self = (soyjointsPlane2D*) soy_joints_joint_construct (object_type, _tmp0_, _tmp1_, _tmp2_, NULL, NULL, NULL, _tmp3_);
	return self;
}


soyjointsPlane2D* soy_joints_plane2_d_new (soyscenesScene* scene, soybodiesBody* bodyA, soybodiesBody* bodyB, soymaterialsMaterial* material) {
	return soy_joints_plane2_d_construct (SOY_JOINTS_TYPE_PLANE2_D, scene, bodyA, bodyB, material);
}


static void soy_joints_plane2_d_real_create (soyjointsJoint* base) {
	soyjointsPlane2D * self;
	soyscenesScene* _tmp0_;
	struct dxWorld* _tmp1_;
	struct dxJoint* _tmp2_;
	self = (soyjointsPlane2D*) base;
	_tmp0_ = ((soyjointsJoint*) self)->scene;
	_tmp1_ = _tmp0_->world;
	_tmp2_ = dJointCreatePlane2D (_tmp1_, NULL);
	_dJointDestroy0 (((soyjointsJoint*) self)->joint);
	((soyjointsJoint*) self)->joint = _tmp2_;
}


void soy_joints_plane2_d_setXParam (soyjointsPlane2D* self, gint param, dReal val) {
	struct dxJoint* _tmp0_;
	gint _tmp1_;
	dReal _tmp2_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((soyjointsJoint*) self)->joint;
	_tmp1_ = param;
	_tmp2_ = val;
	dJointSetPlane2DXParam ((struct dxJoint*) _tmp0_, _tmp1_, _tmp2_);
}


void soy_joints_plane2_d_setYParam (soyjointsPlane2D* self, gint param, dReal val) {
	struct dxJoint* _tmp0_;
	gint _tmp1_;
	dReal _tmp2_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((soyjointsJoint*) self)->joint;
	_tmp1_ = param;
	_tmp2_ = val;
	dJointSetPlane2DYParam ((struct dxJoint*) _tmp0_, _tmp1_, _tmp2_);
}


void soy_joints_plane2_d_setAngleParam (soyjointsPlane2D* self, gint param, dReal val) {
	struct dxJoint* _tmp0_;
	gint _tmp1_;
	dReal _tmp2_;
	g_return_if_fail (self != NULL);
	_tmp0_ = ((soyjointsJoint*) self)->joint;
	_tmp1_ = param;
	_tmp2_ = val;
	dJointSetPlane2DAngleParam ((struct dxJoint*) _tmp0_, _tmp1_, _tmp2_);
}


static void soy_joints_plane2_d_class_init (soyjointsPlane2DClass * klass) {
	soy_joints_plane2_d_parent_class = g_type_class_peek_parent (klass);
	SOY_JOINTS_JOINT_CLASS (klass)->create = soy_joints_plane2_d_real_create;
}


static void soy_joints_plane2_d_instance_init (soyjointsPlane2D * self) {
}


GType soy_joints_plane2_d_get_type (void) {
	static volatile gsize soy_joints_plane2_d_type_id__volatile = 0;
	if (g_once_init_enter (&soy_joints_plane2_d_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soyjointsPlane2DClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_joints_plane2_d_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soyjointsPlane2D), 0, (GInstanceInitFunc) soy_joints_plane2_d_instance_init, NULL };
		GType soy_joints_plane2_d_type_id;
		soy_joints_plane2_d_type_id = g_type_register_static (SOY_JOINTS_TYPE_JOINT, "soyjointsPlane2D", &g_define_type_info, 0);
		g_once_init_leave (&soy_joints_plane2_d_type_id__volatile, soy_joints_plane2_d_type_id);
	}
	return soy_joints_plane2_d_type_id__volatile;
}



